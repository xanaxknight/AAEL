{%- liquid
  assign logo_text = section.settings.logo_text | default: shop.name
  assign collection_text = section.settings.collection_text | default: 'C24'
  assign copyright_text = section.settings.copyright_text
  assign padding_top = section.settings.padding_top | default: 24
  assign padding_bottom = section.settings.padding_bottom | default: 24
-%}

<div class="footer-section-wrapper" style="padding-top: {{ padding_top }}px; padding-bottom: {{ padding_bottom }}px;">
  <div class="grid-container">
    {%- comment -%} Logo & Collection Block (Left) {%- endcomment -%}
    <div 
      class="grid-block footer-block"
      style="
        --span-s: span 1;
        --start-s: 1;
        --row-s: 1;
        --align-s: flex-start;
        --text-s: left;
        --span-m: span 1;
        --start-m: 1;
        --row-m: 1;
        --align-m: flex-start;
        --text-m: left;
        --span-l: span 1;
        --start-l: 2;
        --row-l: 1;
        --align-l: flex-start;
        --text-l: left;
        --span-xl: span 1;
        --start-xl: 3;
        --row-xl: 1;
        --align-xl: flex-start;
        --text-xl: left;
      "
    >
      <div class="logo-badge" style="justify-content: space-between; width: 100%; padding: 0 24px;">
        <span class="brand-text" style="letter-spacing: 0.45rem;">{{ logo_text }}</span>
        <span class="collection-text">{{ collection_text }}</span>
      </div>
    </div>

    {%- comment -%} Footer Links - Desktop Only {%- endcomment -%}
    {%- assign link_blocks = section.blocks | where: 'type', 'link' -%}
    {%- for block in link_blocks -%}
      <div 
        class="grid-block footer-block desktop-only"
        style="
          --span-m: span 1;
          --start-m: {{ forloop.index | plus: 1 }};
          --row-m: 1;
          --align-m: center;
          --text-m: center;
          --span-l: span 1;
          --start-l: {{ forloop.index | plus: 2 }};
          --row-l: 1;
          --align-l: center;
          --text-l: center;
        "
        {{ block.shopify_attributes }}
      >
        <a 
          href="{{ block.settings.link }}" 
          class="footer-text"
          {%- if block.settings.open_new_tab -%}
            target="_blank" 
            rel="noopener noreferrer"
          {%- endif -%}
        >
          {{ block.settings.label }}
        </a>
      </div>
    {%- endfor -%}

    {%- comment -%} Copyright Block (Centered in Column) {%- endcomment -%}
    <div 
      class="grid-block footer-block"
      style="
        --span-s: span 1;
        --start-s: 2;
        --row-s: 1;
        --align-s: center;
        --text-s: center;
        --span-m: span 1;
        --start-m: 4;
        --row-m: 1;
        --align-m: center;
        --text-m: center;
        --span-l: span 1;
        --start-l: 5;
        --row-l: 1;
        --align-l: center;
        --text-l: center;
        --span-xl: span 1;
        --start-xl: 6;
        --row-xl: 1;
        --align-xl: center;
        --text-xl: center;
      "
    >
      <div style="padding: 0 24px;">
        <span class="footer-text static-text">
          {%- if copyright_text != blank -%}
            {{ copyright_text }}
          {%- else -%}
            Â©{{ 'now' | date: '%Y' }}
          {%- endif -%}
        </span>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Footer",
  "tag": "section",
  "class": "section-footer",
  "settings": [
    {
      "type": "header",
      "content": "Brand Info"
    },
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo text",
      "default": "AAEL"
    },
    {
      "type": "text",
      "id": "collection_text",
      "label": "Collection text",
      "default": "C24"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright text",
      "info": "Leave blank to use current year"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Padding Top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Padding Bottom"
    }
  ],
  "blocks": [
    {
      "type": "link",
      "name": "Footer link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "About"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "checkbox",
          "id": "open_new_tab",
          "label": "Open in new tab",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer",
      "blocks": [
        {
          "type": "link",
          "settings": {
            "label": "ABOUT",
            "link": "/pages/about"
          }
        },
        {
          "type": "link",
          "settings": {
            "label": "INSTA",
            "link": "https://instagram.com",
            "open_new_tab": true
          }
        }
      ]
    }
  ]
}
{% endschema %}
