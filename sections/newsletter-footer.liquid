{%- liquid
  assign padding_top = section.settings.padding_top | default: 40
  assign padding_bottom = section.settings.padding_bottom | default: 0
-%}

<div class="newsletter-footer-wrapper" style="padding-top: {{ padding_top }}px; padding-bottom: {{ padding_bottom }}px;">
  {%- comment -%} Newsletter Form Row {%- endcomment -%}
  <div class="grid-container" style="margin-bottom: 80px;">
    <div 
      class="grid-block"
      style="
        --span-s: span 2;
        --align-s: center;
        --text-s: center;
        --span-m: span 4;
        --align-m: center;
        --text-m: center;
        --span-l: span 6;
        --align-l: center;
        --text-l: center;
        --span-xl: span 8;
        --align-xl: center;
        --text-xl: center;
      "
    >
      <div id="newsletter-form" class="newsletter-wrapper" style="width: 100%; max-width: {{ section.settings.form_max_width }}px; margin: 0 auto; text-align: center;">
        <h2 class="lead-text" style="margin-bottom: 32px;">
          {{ section.settings.newsletter_title }}
        </h2>
        
        {%- form 'customer', class: 'newsletter-form-prelaunch' -%}
          <input type="hidden" name="contact[tags]" value="newsletter,prelaunch">
          <div class="newsletter-input-group" style="display: flex; width: 100%; gap: 8px; align-items: center;">
            <input 
              type="email" 
              name="contact[email]"
              class="newsletter-input-prelaunch"
              placeholder="{{ section.settings.newsletter_placeholder }}"
              required
            >
            <button type="submit" class="pill-btn">
              {{ section.settings.newsletter_button }}
            </button>
          </div>
          {%- if form.posted_successfully? -%}
            <div class="newsletter-success" style="margin-top: 12px;">{{ 'newsletter.success' | t | default: 'Thanks for subscribing!' }}</div>
          {%- endif -%}
        {%- endform -%}
      </div>
    </div>
  </div>

  {%- comment -%} Footer Row {%- endcomment -%}
  <div class="grid-container">
    {%- comment -%} Bottom Logo Block (Left) {%- endcomment -%}
    <div 
      class="grid-block footer-block" 
      style="--span-s: span 1; --start-s: 1; --row-s: 1; --align-s: flex-start; --text-s: left; --span-m: span 1; --start-m: 1; --row-m: 1; --align-m: flex-start; --text-m: left; --span-l: span 1; --start-l: 2; --row-l: 1; --align-l: flex-start; --text-l: left; --span-xl: span 1; --start-xl: 3; --row-xl: 1; --align-xl: flex-start; --text-xl: left;"
    >
      <div class="logo-badge" style="justify-content: space-between; width: 100%; padding: 0 24px;">
        <span class="brand-text" style="letter-spacing: 0.45rem;">{{ section.settings.logo_text | default: 'AAEL' }}</span>
        <span class="collection-text">{{ section.settings.collection_text | default: 'C24' }}</span>
      </div>
    </div>

    {%- comment -%} Navigation Links (Center) {%- endcomment -%}
    {%- for block in section.blocks -%}
      {%- if block.type == 'link' -%}
        <div 
          class="grid-block footer-block desktop-only" 
          style="--span-m: span 1; --start-m: {{ forloop.index | plus: 1 }}; --row-m: 1; --align-m: center; --text-m: center; --span-l: span 1; --start-l: {{ forloop.index | plus: 2 }}; --row-l: 1; --align-l: center; --text-l: center;" 
          {{ block.shopify_attributes }}
        >
          <a href="{{ block.settings.link }}" class="footer-text" {% if block.settings.open_new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>
            {{ block.settings.label }}
          </a>
        </div>
      {%- endif -%}
    {%- endfor -%}

    {%- comment -%} Copyright (Centered) {%- endcomment -%}
    <div 
      class="grid-block footer-block" 
      style="--span-s: span 1; --start-s: 2; --row-s: 1; --align-s: center; --text-s: center; --span-m: span 1; --start-m: 4; --row-m: 1; --align-m: center; --text-m: center; --span-l: span 1; --start-l: 5; --row-l: 1; --align-l: center; --text-l: center; --span-xl: span 1; --start-xl: 6; --row-xl: 1; --align-xl: center; --text-xl: center;"
    >
      <div style="padding: 0 24px;">
        <span class="footer-text static-text">Â©{{ 'now' | date: '%Y' }}</span>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter & Footer",
  "tag": "section",
  "class": "section-newsletter-footer",
  "settings": [
    { "type": "text", "id": "newsletter_title", "label": "Newsletter title", "default": "Let me know when AMO is available" },
    { "type": "text", "id": "newsletter_placeholder", "label": "Email placeholder", "default": "Email" },
    { "type": "text", "id": "newsletter_button", "label": "Submit button text", "default": "Send" },
    { "type": "range", "id": "form_max_width", "min": 300, "max": 600, "step": 10, "default": 400, "unit": "px", "label": "Form Max Width" },
    { "type": "header", "content": "Brand Info" },
    { "type": "text", "id": "logo_text", "label": "Logo text", "default": "AAEL" },
    { "type": "text", "id": "collection_text", "label": "Collection text", "default": "C24" },
    { "type": "header", "content": "Spacing" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 200, "step": 4, "default": 40, "unit": "px", "label": "Padding Top" },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 200, "step": 4, "default": 0, "unit": "px", "label": "Padding Bottom" }
  ],
  "blocks": [
    {
      "type": "link",
      "name": "Footer link",
      "settings": [
        { "type": "text", "id": "label", "label": "Label", "default": "About" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "checkbox", "id": "open_new_tab", "label": "Open in new tab", "default": false }
      ]
    }
  ],
  "presets": [
    { "name": "Newsletter & Footer" }
  ]
}
{% endschema %}
