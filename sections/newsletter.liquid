{%- liquid
  assign padding_top = section.settings.padding_top | default: 40
  assign padding_bottom = section.settings.padding_bottom | default: 80
-%}

<div class="newsletter-section-wrapper" style="padding-top: {{ padding_top }}px; padding-bottom: {{ padding_bottom }}px;">
  <div class="grid-container">
    <div 
      class="grid-block"
      style="
        --span-s: span 2;
        --align-s: center;
        --text-s: center;
        --span-m: span 4;
        --align-m: center;
        --text-m: center;
        --span-l: span 6;
        --align-l: center;
        --text-l: center;
        --span-xl: span 8;
        --align-xl: center;
        --text-xl: center;
      "
    >
      <div class="newsletter-text" style="width: 100%; margin: 0 auto; text-align: center; margin-bottom: 32px;">
        <h2 class="lead-text">
          {{ section.settings.newsletter_title }}
        </h2>
      </div>
      
      <div id="newsletter-form" class="newsletter-wrapper" style="width: 100%; max-width: {{ section.settings.form_max_width }}px; margin: 0 auto; text-align: center;">
        {%- form 'customer', class: 'newsletter-form-prelaunch' -%}
          <input type="hidden" name="contact[tags]" value="newsletter,prelaunch">
          <div class="newsletter-input-group" style="display: flex; width: 100%; gap: 8px; align-items: center;">
            <input 
              type="email" 
              name="contact[email]"
              class="newsletter-input-prelaunch"
              placeholder="{{ section.settings.newsletter_placeholder }}"
              required
            >
            <button type="submit" class="pill-btn">
              {{ section.settings.newsletter_button }}
            </button>
          </div>
          {%- if form.posted_successfully? -%}
            <div class="newsletter-success" style="margin-top: 12px;">{{ 'newsletter.success' | t | default: 'Thanks for subscribing!' }}</div>
          {%- endif -%}
        {%- endform -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter",
  "tag": "section",
  "class": "section-newsletter",
  "settings": [
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Newsletter title",
      "default": "Let me know when AMO is available"
    },
    {
      "type": "text",
      "id": "newsletter_placeholder",
      "label": "Email placeholder",
      "default": "Email"
    },
    {
      "type": "text",
      "id": "newsletter_button",
      "label": "Submit button text",
      "default": "Send"
    },
    {
      "type": "range",
      "id": "form_max_width",
      "min": 300,
      "max": 600,
      "step": 10,
      "default": 400,
      "unit": "px",
      "label": "Form Max Width"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 40,
      "unit": "px",
      "label": "Padding Top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 80,
      "unit": "px",
      "label": "Padding Bottom"
    }
  ],
  "presets": [
    {
      "name": "Newsletter"
    }
  ]
}
{% endschema %}
