{%- comment -%}
  AAEL Header
  - Logo (left)
  - Theme toggle + Collection name (center)
  - Column switcher (center-right)
  - Cart/Bag (right)
{%- endcomment -%}

<header class="header">
  <div class="header__inner grid">
    {%- comment -%} Logo - 1 column {%- endcomment -%}
    <div class="header__logo col-1">
      <a href="{{ routes.root_url }}" class="header__logo-link">
        {%- if section.settings.logo != blank -%}
          <img 
            src="{{ section.settings.logo | image_url: width: 200 }}"
            alt="{{ shop.name }}"
            width="{{ section.settings.logo_width }}"
            height="auto"
            loading="eager"
          >
        {%- else -%}
          <div class="header__logo-text">
            <span class="header__logo-part">AAEL </span>
            <span class="header__logo-part">C24</span>
          </div>
        {%- endif -%}
      </a>
    </div>

    {%- comment -%} Theme Toggle - 1 column {%- endcomment -%}
    <div class="header__theme-section col-1">
      <button 
        type="button" 
        class="header__theme-toggle" 
        data-theme-toggle
        aria-label="{{ 'accessibility.toggle_theme' | t }}"
      >
        {% render 'icon-lights-on', class: 'header__theme-icon header__theme-icon--light' %}
        {% render 'icon-lights-off-ring', class: 'header__theme-icon header__theme-icon--dark' %}
      </button>
    </div>

    {%- comment -%} Column Switcher - 1 column {%- endcomment -%}
    <nav class="header__columns col-1" aria-label="{{ 'accessibility.grid_columns' | t }}">
      <button 
        type="button"
        class="header__col-btn" 
        data-columns="2"
        aria-label="2 columns"
      >02</button>
      <button 
        type="button"
        class="header__col-btn active" 
        data-columns="4"
        aria-label="4 columns"
      >04</button>
      <button 
        type="button"
        class="header__col-btn" 
        data-columns="6"
        aria-label="6 columns"
      >06</button>
      <button 
        type="button"
        class="header__col-btn" 
        data-columns="8"
        aria-label="8 columns"
      >08</button>
    </nav>

    {%- comment -%} Cart/Bag - 1 column {%- endcomment -%}
    <div class="header__bag col-1">
      <a href="{{ routes.cart_url }}" class="header__bag-link">
        BAG(<span data-cart-count>{{ cart.item_count }}</span>)
      </a>
    </div>
  </div>
</header>

<style>
  .header {
    position: sticky;
    top: 0;
    z-index: var(--z-header);
    background: transparent;
    padding: var(--space-3) 0;
    width: 100%;
  }

  .header__inner {
    /* Uses .grid class for layout */
    align-items: center;
  }

  /* Each header section fills its column and centers content */
  .header__logo,
  .header__theme-section,
  .header__columns,
  .header__bag {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 48px;
  }

  /* Logo - left-aligned within its column */
  .header__logo {
    justify-content: flex-start;
    width: 100%;
  }

  .header__logo-link {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    vertical-align: middle;
    align-self: stretch;
    width: 100%;
    padding: var(--space-5) var(--space-5);
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(1, 1fr);
  }

  .header__logo-text {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    font-size: var(--text-base);
    font-weight: 400;
    letter-spacing: var(--tracking-widest, 0.3em);
    line-height: var(--leading-tight, 0.75);
  }

  .header__logo-part {
    display: flex;
    text-align: right;
    justify-content: flex-start;
    align-items: center;
    width: 100%;
    line-height: var(--leading-tight, 0.75);
  }

  /* Theme toggle section - centered */
  .header__theme-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-2);
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .header__theme-icon {
    width: 24px;
    height: 24px;
    transition: opacity var(--duration-normal);
  }

  .header__theme-icon--light {
    opacity: 1;
    display: block;
  }

  .header__theme-icon--dark {
    opacity: var(--opacity-muted, 0.3);
    display: none;
  }

  [data-theme="dark"] .header__theme-icon--light {
    opacity: var(--opacity-muted, 0.3);
    display: none;
  }

  [data-theme="dark"] .header__theme-icon--dark {
    opacity: 1;
    display: block;
  }

  /* Column switcher - centered, shows column options */
  .header__columns {
    gap: var(--space-2);
  }

  .header__col-btn {
    font-size: var(--text-base);
    font-weight: 400;
    letter-spacing: var(--tracking-wide, 0.05em);
    line-height: var(--leading-normal, 1.08);
    padding: var(--space-2) var(--space-3);
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--color-text);
    opacity: var(--opacity-muted, 0.3);
    transition: opacity var(--duration-fast);
  }

  .header__col-btn:hover {
    opacity: var(--opacity-active, 0.8);
  }

  .header__col-btn.active {
    opacity: var(--opacity-active, 0.8);
  }

  /* Bag - centered within its column */
  .header__bag {
    justify-content: center;
    text-align: center;
    vertical-align: middle;
  }

  .header__bag-link {
    font-size: var(--text-base);
    font-weight: 400;
    letter-spacing: var(--tracking-wide, 0.05em);
    line-height: var(--leading-normal, 1.08);
    padding: var(--space-2) var(--space-4);
    color: var(--color-text);
    opacity: var(--opacity-active, 0.8);
  }

  /* Responsive - on mobile, header adapts to 2 columns */
  @media (max-width: 768px) {
    .header__columns {
      display: none;
    }

    .header__theme-section {
      justify-content: flex-end;
    }

    .header__logo-link {
      padding: var(--space-3);
    }
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "label": "Logo width",
      "min": 50,
      "max": 200,
      "step": 10,
      "default": 100,
      "unit": "px"
    },
    {
      "type": "text",
      "id": "collection_label",
      "label": "Collection label",
      "default": "C 2 4"
    }
  ]
}
{% endschema %}


